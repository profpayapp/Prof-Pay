fetch("https://sandbox.vtpass.com/api/pay", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "username": "sandbox@vtpass.com",
    "password": "sandbox",
  },
  body: JSON.stringify({
    serviceID: "mtn",
    billersCode: phone,
    variation_code: "",
    amount: amount,
    phone: phone,
    request_id: "airtime_" + Date.now(),
  }),
})
.then(async (response) => {
  let text = await response.text();
  try {
    let data = JSON.parse(text);
    console.log("Response data:", data);
    alert("✅ Success: " + data.response_description);
  } catch (err) {
    console.error("❌ Failed to parse JSON:", text);
    alert("❌ Error: Invalid response from VTpass.\n\nRaw Response:\n" + text);
  }
})
.catch((error) => {
  console.error("❌ Fetch error:", error);
  alert("❌ Network error. Could not reach VTpass.");
});
