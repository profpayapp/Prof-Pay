<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Prof-Pay Admin Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Poppins', sans-serif;
  background:#f4f6fb;
  padding:20px;
}
h1 {
  color:#003366;
}
.dashboard {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
  gap:15px;
  margin-bottom:20px;
}
.card {
  background:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 2px 10px rgba(0,0,0,0.1);
}
table {
  width:100%;
  border-collapse:collapse;
  background:white;
  border-radius:12px;
  overflow:hidden;
}
th, td {
  padding:12px;
  border-bottom:1px solid #eee;
  text-align:left;
}
th {
  background:#003366;
  color:white;
}
</style>
</head>

<body>

<h1>ðŸ“Š Prof-Pay Admin Dashboard</h1>

<div class="dashboard">
  <div class="card">
    <h3>Total Transactions</h3>
    <p id="totalTx">0</p>
  </div>
  <div class="card">
    <h3>Total Amount</h3>
    <p id="totalAmount">â‚¦0</p>
  </div>
</div>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Service</th>
      <th>Amount</th>
      <th>Payment</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="txTable"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// ðŸ” SAME FIREBASE CONFIG YOU USED BEFORE
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const table = document.getElementById("txTable");
const totalTx = document.getElementById("totalTx");
const totalAmount = document.getElementById("totalAmount");

let txCount = 0;
let amountSum = 0;

onSnapshot(collection(db, "transactions"), (snapshot) => {
  table.innerHTML = "";
  txCount = 0;
  amountSum = 0;

  snapshot.forEach(doc => {
    const d = doc.data();
    txCount++;
    amountSum += Number(d.amount);

    table.innerHTML += `
      <tr>
        <td>${new Date(d.date).toLocaleString()}</td>
        <td>${d.service}</td>
        <td>â‚¦${d.amount}</td>
        <td>${d.payment_method}</td>
        <td>${d.status}</td>
      </tr>
    `;
  });

  totalTx.textContent = txCount;
  totalAmount.textContent = "â‚¦" + amountSum;
});
</script>

</body>
</html>
